{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/aaron/OneDrive/Desktop/Cabinent/Content/Code/Github/CAP Full Stack/Final Project/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/aaron/OneDrive/Desktop/Cabinent/Content/Code/Github/CAP Full Stack/Final Project/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/aaron/OneDrive/Desktop/Cabinent/Content/Code/Github/CAP Full Stack/Final Project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{Link}from'react-router-dom';import{supabase}from'../client';import'./Card.css';import more from'./more.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Card=function Card(_ref){var id=_ref.id,title=_ref.title,created=_ref.created,likes=_ref.likes;var _useState=useState(likes),_useState2=_slicedToArray(_useState,2),count=_useState2[0],setCount=_useState2[1];var updateCount=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var newCount,_yield$supabase$from$,error;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:newCount=count+1;setCount(newCount);_context.prev=2;_context.next=5;return supabase.from('Manure Posts').update({likes:newCount}).eq('id',id);case 5:_yield$supabase$from$=_context.sent;error=_yield$supabase$from$.error;if(error){console.error('Error updating likes:',error);setCount(count);}_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](2);console.error('Error updating likes:',_context.t0.message);setCount(count);case 14:case\"end\":return _context.stop();}}},_callee,null,[[2,10]]);}));return function updateCount(){return _ref2.apply(this,arguments);};}();var formattedDate=new Date(created).toLocaleDateString('en-US',{year:'numeric',month:'long',day:'numeric'});return/*#__PURE__*/_jsxs(\"div\",{className:\"Card\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/details/\".concat(id),className:\"card-link\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Card-Header\",children:/*#__PURE__*/_jsx(Link,{to:\"/edit/\".concat(id),className:\"edit-link\",children:/*#__PURE__*/_jsx(\"img\",{className:\"moreButton\",alt:\"edit button\",src:more})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"Card-Content\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"title\",children:title}),/*#__PURE__*/_jsx(\"p\",{className:\"created\",children:/*#__PURE__*/_jsx(Link,{to:\"/details/\".concat(id),className:\"date-link\",style:{textDecoration:'none',color:'inherit'},children:formattedDate})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"Card-Footer\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"like\",onClick:updateCount,children:[\"\\uD83D\\uDEBD \",count]})})]});};export default Card;","map":{"version":3,"names":["React","useState","Link","supabase","more","Card","id","title","created","likes","count","setCount","updateCount","newCount","from","update","eq","error","console","message","formattedDate","Date","toLocaleDateString","year","month","day","textDecoration","color"],"sources":["C:/Users/aaron/OneDrive/Desktop/Cabinent/Content/Code/Github/CAP Full Stack/Final Project/client/src/components/Card.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { supabase } from '../client';\nimport './Card.css';\nimport more from './more.png';\n\nconst Card = ({ id, title, created, likes }) => {\n    const [count, setCount] = useState(likes);\n\n    const updateCount = async () => {\n        const newCount = count + 1;\n        setCount(newCount);\n\n        try {\n            const { error } = await supabase\n                .from('Manure Posts')\n                .update({ likes: newCount })\n                .eq('id', id);\n\n            if (error) {\n                console.error('Error updating likes:', error);\n                setCount(count); \n            }\n        } catch (error) {\n            console.error('Error updating likes:', error.message);\n            setCount(count); \n        }\n    };\n\n    const formattedDate = new Date(created).toLocaleDateString('en-US', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n    });\n\n    return (\n        <div className=\"Card\">\n            <Link to={`/details/${id}`} className=\"card-link\">\n                <div className=\"Card-Header\">\n                    <Link to={`/edit/${id}`} className=\"edit-link\">\n                        <img className=\"moreButton\" alt=\"edit button\" src={more} />\n                    </Link>\n                </div>\n                <div className=\"Card-Content\">\n                    <h2 className=\"title\">{title}</h2>\n                    <p className=\"created\">\n                        <Link to={`/details/${id}`} className=\"date-link\" style={{ textDecoration: 'none', color: 'inherit' }}>\n                            {formattedDate}\n                        </Link>\n                    </p>\n                </div>\n            </Link>\n            <div className=\"Card-Footer\">\n                <button className=\"like\" onClick={updateCount}>ðŸš½ {count}</button>\n            </div>\n        </div>\n    );\n};\n\nexport default Card;\n"],"mappings":"kjBAAA,MAAOA,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,QAAT,KAAyB,WAAzB,CACA,MAAO,YAAP,CACA,MAAOC,KAAP,KAAiB,YAAjB,C,wFAEA,GAAMC,KAAI,CAAG,QAAPA,KAAO,MAAmC,IAAhCC,GAAgC,MAAhCA,EAAgC,CAA5BC,KAA4B,MAA5BA,KAA4B,CAArBC,OAAqB,MAArBA,OAAqB,CAAZC,KAAY,MAAZA,KAAY,CAC5C,cAA0BR,QAAQ,CAACQ,KAAD,CAAlC,wCAAOC,KAAP,eAAcC,QAAd,eAEA,GAAMC,YAAW,6FAAG,8KACVC,QADU,CACCH,KAAK,CAAG,CADT,CAEhBC,QAAQ,CAACE,QAAD,CAAR,CAFgB,sCAKYV,SAAQ,CAC3BW,IADmB,CACd,cADc,EAEnBC,MAFmB,CAEZ,CAAEN,KAAK,CAAEI,QAAT,CAFY,EAGnBG,EAHmB,CAGhB,IAHgB,CAGVV,EAHU,CALZ,4CAKJW,KALI,uBAKJA,KALI,CAUZ,GAAIA,KAAJ,CAAW,CACPC,OAAO,CAACD,KAAR,CAAc,uBAAd,CAAuCA,KAAvC,EACAN,QAAQ,CAACD,KAAD,CAAR,CACH,CAbW,iFAeZQ,OAAO,CAACD,KAAR,CAAc,uBAAd,CAAuC,YAAME,OAA7C,EACAR,QAAQ,CAACD,KAAD,CAAR,CAhBY,qEAAH,kBAAXE,YAAW,2CAAjB,CAoBA,GAAMQ,cAAa,CAAG,GAAIC,KAAJ,CAASb,OAAT,EAAkBc,kBAAlB,CAAqC,OAArC,CAA8C,CAChEC,IAAI,CAAE,SAD0D,CAEhEC,KAAK,CAAE,MAFyD,CAGhEC,GAAG,CAAE,SAH2D,CAA9C,CAAtB,CAMA,mBACI,aAAK,SAAS,CAAC,MAAf,wBACI,MAAC,IAAD,EAAM,EAAE,oBAAcnB,EAAd,CAAR,CAA4B,SAAS,CAAC,WAAtC,wBACI,YAAK,SAAS,CAAC,aAAf,uBACI,KAAC,IAAD,EAAM,EAAE,iBAAWA,EAAX,CAAR,CAAyB,SAAS,CAAC,WAAnC,uBACI,YAAK,SAAS,CAAC,YAAf,CAA4B,GAAG,CAAC,aAAhC,CAA8C,GAAG,CAAEF,IAAnD,EADJ,EADJ,EADJ,cAMI,aAAK,SAAS,CAAC,cAAf,wBACI,WAAI,SAAS,CAAC,OAAd,UAAuBG,KAAvB,EADJ,cAEI,UAAG,SAAS,CAAC,SAAb,uBACI,KAAC,IAAD,EAAM,EAAE,oBAAcD,EAAd,CAAR,CAA4B,SAAS,CAAC,WAAtC,CAAkD,KAAK,CAAE,CAAEoB,cAAc,CAAE,MAAlB,CAA0BC,KAAK,CAAE,SAAjC,CAAzD,UACKP,aADL,EADJ,EAFJ,GANJ,GADJ,cAgBI,YAAK,SAAS,CAAC,aAAf,uBACI,gBAAQ,SAAS,CAAC,MAAlB,CAAyB,OAAO,CAAER,WAAlC,2BAAmDF,KAAnD,GADJ,EAhBJ,GADJ,CAsBH,CAnDD,CAqDA,cAAeL,KAAf"},"metadata":{},"sourceType":"module"}