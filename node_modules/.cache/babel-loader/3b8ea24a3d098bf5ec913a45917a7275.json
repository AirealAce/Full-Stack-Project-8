{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/aaron/OneDrive/Desktop/Cabinent/Content/Code/Github/CAP Full Stack/Final Project/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/aaron/OneDrive/Desktop/Cabinent/Content/Code/Github/CAP Full Stack/Final Project/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/aaron/OneDrive/Desktop/Cabinent/Content/Code/Github/CAP Full Stack/Final Project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import Card from'../components/Card';import{supabase}from'../client';import'./ReadPosts.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ReadPosts=function ReadPosts(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),characters=_useState2[0],setCharacters=_useState2[1];var _useState3=useState('created_at'),_useState4=_slicedToArray(_useState3,2),sortBy=_useState4[0],setSortBy=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),searchTitle=_useState6[0],setSearchTitle=_useState6[1];useEffect(function(){var fetchCharacters=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$supabase$from$,characters,error;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return supabase.from('Manure Posts').select('*').order(sortBy,{ascending:false});case 2:_yield$supabase$from$=_context.sent;characters=_yield$supabase$from$.data;error=_yield$supabase$from$.error;if(error){console.error('Error fetching characters:',error);}else{setCharacters(characters);}case 6:case\"end\":return _context.stop();}}},_callee);}));return function fetchCharacters(){return _ref.apply(this,arguments);};}();fetchCharacters();},[sortBy]);var handleSortChange=function handleSortChange(e){setSortBy(e.target.value);};var handleSearchChange=function handleSearchChange(e){setSearchTitle(e.target.value.toLowerCase());};var filteredCharacters=characters.filter(function(character){return character.name.toLowerCase().includes(searchTitle);});return/*#__PURE__*/_jsxs(\"div\",{className:\"ReadPosts\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"searchBar\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"sortBy\",children:\"Sort By:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"sortBy\",value:sortBy,onChange:handleSortChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"created_at\",children:\"Latest Created\"}),/*#__PURE__*/_jsx(\"option\",{value:\"likes\",children:\"Most Upvotes\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by title\",value:searchTitle,onChange:handleSearchChange})]}),/*#__PURE__*/_jsx(\"div\",{className:\"cardsContainer\",children:filteredCharacters.length>0?filteredCharacters.map(function(character){return/*#__PURE__*/_jsx(Card,{id:character.id,title:character.name,created:character.created_at,likes:character.likes},character.id);}):/*#__PURE__*/_jsx(\"h2\",{children:\"No Posts Found \\uD83D\\uDE1E\"})})]});};export default ReadPosts;","map":{"version":3,"names":["React","useState","useEffect","Card","supabase","ReadPosts","characters","setCharacters","sortBy","setSortBy","searchTitle","setSearchTitle","fetchCharacters","from","select","order","ascending","data","error","console","handleSortChange","e","target","value","handleSearchChange","toLowerCase","filteredCharacters","filter","character","name","includes","length","map","id","created_at","likes"],"sources":["C:/Users/aaron/OneDrive/Desktop/Cabinent/Content/Code/Github/CAP Full Stack/Final Project/client/src/pages/ReadPosts.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Card from '../components/Card';\nimport { supabase } from '../client';\nimport './ReadPosts.css'; \n\nconst ReadPosts = () => {\n    const [characters, setCharacters] = useState([]);\n    const [sortBy, setSortBy] = useState('created_at'); \n    const [searchTitle, setSearchTitle] = useState('');\n\n    useEffect(() => {\n        const fetchCharacters = async () => {\n            let { data: characters, error } = await supabase\n                .from('Manure Posts')\n                .select('*')\n                .order(sortBy, { ascending: false });\n\n            if (error) {\n                console.error('Error fetching characters:', error);\n            } else {\n                setCharacters(characters);\n            }\n        };\n\n        fetchCharacters();\n    }, [sortBy]);\n\n    const handleSortChange = (e) => {\n        setSortBy(e.target.value);\n    };\n\n    const handleSearchChange = (e) => {\n        setSearchTitle(e.target.value.toLowerCase()); \n    };\n\n    const filteredCharacters = characters.filter(character =>\n        character.name.toLowerCase().includes(searchTitle) \n    );\n\n    return (\n        <div className=\"ReadPosts\">\n            <div className=\"searchBar\">\n                <label htmlFor=\"sortBy\">Sort By:</label>\n                <select id=\"sortBy\" value={sortBy} onChange={handleSortChange}>\n                    <option value=\"created_at\">Latest Created</option>\n                    <option value=\"likes\">Most Upvotes</option>\n                </select>\n                <input\n                    type=\"text\"\n                    placeholder=\"Search by title\"\n                    value={searchTitle}\n                    onChange={handleSearchChange}\n                />\n            </div>\n            <div className=\"cardsContainer\">\n                {\n                    filteredCharacters.length > 0 ?\n                        filteredCharacters.map(character => (\n                            <Card\n                                key={character.id}\n                                id={character.id}\n                                title={character.name}\n                                created={character.created_at}\n                                likes={character.likes}\n                            />\n                        )) : <h2>No Posts Found ðŸ˜ž</h2>\n                }\n            </div>\n        </div>\n    );\n}\n\nexport default ReadPosts;\n"],"mappings":"kjBAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,KAAP,KAAiB,oBAAjB,CACA,OAASC,QAAT,KAAyB,WAAzB,CACA,MAAO,iBAAP,C,wFAEA,GAAMC,UAAS,CAAG,QAAZA,UAAY,EAAM,CACpB,cAAoCJ,QAAQ,CAAC,EAAD,CAA5C,wCAAOK,UAAP,eAAmBC,aAAnB,eACA,eAA4BN,QAAQ,CAAC,YAAD,CAApC,yCAAOO,MAAP,eAAeC,SAAf,eACA,eAAsCR,QAAQ,CAAC,EAAD,CAA9C,yCAAOS,WAAP,eAAoBC,cAApB,eAEAT,SAAS,CAAC,UAAM,CACZ,GAAMU,gBAAe,4FAAG,sMACoBR,SAAQ,CAC3CS,IADmC,CAC9B,cAD8B,EAEnCC,MAFmC,CAE5B,GAF4B,EAGnCC,KAHmC,CAG7BP,MAH6B,CAGrB,CAAEQ,SAAS,CAAE,KAAb,CAHqB,CADpB,4CACRV,UADQ,uBACdW,IADc,CACIC,KADJ,uBACIA,KADJ,CAMpB,GAAIA,KAAJ,CAAW,CACPC,OAAO,CAACD,KAAR,CAAc,4BAAd,CAA4CA,KAA5C,EACH,CAFD,IAEO,CACHX,aAAa,CAACD,UAAD,CAAb,CACH,CAVmB,sDAAH,kBAAfM,gBAAe,0CAArB,CAaAA,eAAe,GAClB,CAfQ,CAeN,CAACJ,MAAD,CAfM,CAAT,CAiBA,GAAMY,iBAAgB,CAAG,QAAnBA,iBAAmB,CAACC,CAAD,CAAO,CAC5BZ,SAAS,CAACY,CAAC,CAACC,MAAF,CAASC,KAAV,CAAT,CACH,CAFD,CAIA,GAAMC,mBAAkB,CAAG,QAArBA,mBAAqB,CAACH,CAAD,CAAO,CAC9BV,cAAc,CAACU,CAAC,CAACC,MAAF,CAASC,KAAT,CAAeE,WAAf,EAAD,CAAd,CACH,CAFD,CAIA,GAAMC,mBAAkB,CAAGpB,UAAU,CAACqB,MAAX,CAAkB,SAAAC,SAAS,QAClDA,UAAS,CAACC,IAAV,CAAeJ,WAAf,GAA6BK,QAA7B,CAAsCpB,WAAtC,CADkD,EAA3B,CAA3B,CAIA,mBACI,aAAK,SAAS,CAAC,WAAf,wBACI,aAAK,SAAS,CAAC,WAAf,wBACI,cAAO,OAAO,CAAC,QAAf,sBADJ,cAEI,gBAAQ,EAAE,CAAC,QAAX,CAAoB,KAAK,CAAEF,MAA3B,CAAmC,QAAQ,CAAEY,gBAA7C,wBACI,eAAQ,KAAK,CAAC,YAAd,4BADJ,cAEI,eAAQ,KAAK,CAAC,OAAd,0BAFJ,GAFJ,cAMI,cACI,IAAI,CAAC,MADT,CAEI,WAAW,CAAC,iBAFhB,CAGI,KAAK,CAAEV,WAHX,CAII,QAAQ,CAAEc,kBAJd,EANJ,GADJ,cAcI,YAAK,SAAS,CAAC,gBAAf,UAEQE,kBAAkB,CAACK,MAAnB,CAA4B,CAA5B,CACIL,kBAAkB,CAACM,GAAnB,CAAuB,SAAAJ,SAAS,qBAC5B,KAAC,IAAD,EAEI,EAAE,CAAEA,SAAS,CAACK,EAFlB,CAGI,KAAK,CAAEL,SAAS,CAACC,IAHrB,CAII,OAAO,CAAED,SAAS,CAACM,UAJvB,CAKI,KAAK,CAAEN,SAAS,CAACO,KALrB,EACSP,SAAS,CAACK,EADnB,CAD4B,EAAhC,CADJ,cASS,mDAXjB,EAdJ,GADJ,CA+BH,CAjED,CAmEA,cAAe5B,UAAf"},"metadata":{},"sourceType":"module"}